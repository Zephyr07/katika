<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-chip *ngIf="is_user" class="chip" (click)="showUser()">
      <ion-avatar>
        <img alt="{{user.user_name}}" src="../../../assets/icon/logo.png" />
      </ion-avatar>
      <ion-label>{{user.user_name}}</ion-label>
    </ion-chip>

    <ion-chip slot="end" class="chip" *ngIf="is_user">
      <ion-label>{{user.point|priceFormat}} W</ion-label>
    </ion-chip>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="home-content">

  <ion-grid>
    <ion-row>
      <ion-col class="ion-text-center" size="12">
        <img src="../../../assets/img/Katika-25-08-2024.png" alt="" class="radius" >

        <img src="../../../assets/img/Joue-et-tente-de-gagner-25-08-2024.png" alt="" class="radius" >
      </ion-col>
      <ion-col size="12" class="rapier ion-text-center">
        <div class="cagnotte">
          <span style="font-size: 30px">Cagnotte du jour</span> <br>
          <span style="font-size: 40px; color:#fff">{{cagnotte|priceFormat}} W</span>
        </div>
      </ion-col>
    </ion-row>

  </ion-grid>

  <ion-grid>
    <div class="sous-titre ion-text-center" style="margin-top: -10px !important;">
      <img src="../../../assets/img/Gagnants-pr-c-dents-25-08-2024.png" style="width: 80%" alt="" class="radius">
    </div>
    <ion-row class="score">
      <ion-col class="ion-text-center">
        <ion-chip *ngFor="let s of scores" class="chip">
          <ion-avatar>
            <img alt="{{s.user.user_name}}" src="../../../assets/icon/logo.png" />
          </ion-avatar>
          <ion-label><strong>{{s.user.user_name|limitTo:10}}</strong>
            <br>
            <small><strong>{{s.jackpot|priceFormat}}</strong> W à {{s.game.name}}</small>
            <br>
            <small>{{s.updated_at|dateFormat}}</small>
          </ion-label>
        </ion-chip>
      </ion-col>
      <ion-col class="ion-text-center">
        <ion-chip *ngFor="let s of scores_bis" class="chip">>
          <ion-avatar>
            <img alt="{{s.user.user_name}}" src="../../../assets/icon/logo.png" />
          </ion-avatar>
          <ion-label><strong>{{s.user.user_name|limitTo:10}}</strong>
            <br>
            <small><strong>{{s.jackpot|priceFormat}}</strong> W à {{s.game.name}}</small>
            <br>
            <small>{{s.updated_at|dateFormat}}</small>
          </ion-label>
        </ion-chip>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <div class="sous-titre ion-text-center" style="margin-top: 0">
      <img src="../../../assets/img/Jouer-25-08-2024.png" alt="" class="radius pulsate-bck" style="width: 80%" (click)="games()">
    </div>
  </ion-grid>

  <ion-button  style="display: none" id="open-modalC" expand="block">Open Sheet Modal</ion-button>

  <ion-modal #modalDetail trigger="open-modalC" [initialBreakpoint]="0.75" [breakpoints]="[0,0.75,1]">
    <ng-template>
      <ion-content>
        <ion-row class="ion-text-center" style="margin-top: 10px">
          <ion-col size="6">
            <img src="../../../assets/img/Connexion-26-08-2024.png" alt="" class="radius" style="width: 80%" (click)="choice='c'">
          </ion-col>
          <ion-col size="6">
            <img src="../../../assets/img/Inscription-26-08-2024.png" alt="" class="radius" style="width: 80%" (click)="choice='i'">
          </ion-col>
        </ion-row>

        <ion-grid class="custom" *ngIf="choice=='c'">
          <ion-row>
            <ion-col>
              <ion-input type="number" label="Téléphone*" min="MIN" max="MAX" [(ngModel)]="phone" labelPlacement="stacked" placeholder="Téléphone"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-input type="password" label="Mot de passe" (keyup.enter)="login()" [(ngModel)]="password" labelPlacement="stacked" placeholder="Mot de passe"></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-button expand="block" color="tertiary" (click)="login()" >{{'login'|translate}}</ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid class="custom" *ngIf="choice=='i'">
          <ion-row>
            <ion-col size="6">
              <ion-input type="text" label="Username*" [(ngModel)]="user_name" labelPlacement="stacked" placeholder="Username"></ion-input>
            </ion-col>
            <ion-col size="6">
              <ion-input type="number" label="Téléphone*" min="{{MIN}}" max="{{MAX}}" [(ngModel)]="phone" labelPlacement="stacked" placeholder="Téléphone"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col >
              <ion-input type="email" label="Email*" [(ngModel)]="email" labelPlacement="stacked" placeholder="Email"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="6">
              <ion-input type="password" label="Mot de passe" [(ngModel)]="password" labelPlacement="stacked" placeholder="Mot de passe"></ion-input>
            </ion-col>
            <ion-col size="6">
              <ion-input type="password" label="Mot de passe encore" [(ngModel)]="password_confirmation" labelPlacement="stacked" placeholder="Mot de passe encore"></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-button expand="block" color="tertiary" (click)="register()" >{{'register'|translate}}</ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>

      </ion-content>
    </ng-template>
  </ion-modal>

</ion-content>
